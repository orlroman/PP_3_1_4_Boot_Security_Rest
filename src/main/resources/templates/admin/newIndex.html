<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin panel</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<!---------- header ------------->
<nav class="navbar bg-dark">
    <div class="container-fluid">
        <div class="navbar-text text-light fs-5 ms-3">
            <span class="fw-bold" id="user-email"></span>
            <span>with roles:</span>
            <span id="user-roles"></span>
        </div>
        <form th:action="@{/logout}" th:method="POST">
            <input class="btn btn-outline-light" type="submit" value="Logout"/>
        </form>
    </div>
</nav>
<!------------- body --------------->
<div class="container-fluid">
    <div class="row vh-100">
        <!------------- left --------------->
        <div class="col-2 mt-3 px-0">
            <div class="row">
                <ul class="nav nav-pills flex-column">
                    <li class="nav-item ms-2">
                        <a class="nav-link active" href="/admin">Admin</a>
                    </li>
                    <li class="nav-item ms-2">
                        <a class="nav-link" href="/user">User</a>
                    </li>
                </ul>
            </div>
        </div>
        <!------------- right --------------->
        <div class="col-10 bg-light">
            <div class="row">
                <div class="col">
                    <div class="mt-2 ms-4 me-4">
                        <span class="fs-1 fw-semibold ">Admin panel</span>
                        <!-- tabs -->
                        <div class="mt-2">
                            <ul class="nav nav-tabs">
                                <li class="nav-item">
                                    <a class="nav-link active">Users table</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="/admin/new">New User</a>
                                </li>
                            </ul>
                        </div>
                            <!-- table -->
                            <div class="card tab-pane show active" id="all-users">
                                <h3 class="card-header fs-4">All users</h3>
                                <div class="card-body">
                                    <hr>
                                    <table class="table table-striped" id="users-table">
                                        <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>First Name</th>
                                            <th>Last Name</th>
                                            <th>Age</th>
                                            <th>Email</th>
                                            <th>Role</th>
                                            <th>Edit</th>
                                            <th>Delete</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!--&lt;!&ndash; modal edit user &ndash;&gt;-->
<!--<div class="modal" id="editUserModal" tabindex="-1" aria-labelledby="editUserLabel" aria-hidden="true">-->
<!--    <div class="modal-dialog">-->
<!--        <div class="modal-content">-->
<!--            <div class="modal-header">-->
<!--                <h5 class="modal-title" id="editUserLabel">Edit user</h5>-->
<!--                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">-->
<!--                </button>-->
<!--            </div>-->
<!--            <div class="modal-body text-center">-->
<!--                <form id="editUserForm" th:method="POST" th:action="@{/admin/edit/{id}}">-->
<!--                    <div class="mb-3">-->
<!--                        <label class="form-label fw-bold" for="editId">ID</label>-->
<!--                        <input class="form-control w-50 mx-auto bg-light" type="text" id="editId" disabled>-->
<!--                    </div>-->

<!--                    <div class="mb-3">-->
<!--                        <label class="form-label fw-bold" for="editFirstName">First name</label>-->
<!--                        <input class="form-control w-50 mx-auto" type="text" id="editFirstName">-->

<!--                        &lt;!&ndash;                        <div class="alert alert-danger mt-2 w-75 mx-auto"&ndash;&gt;-->
<!--                        &lt;!&ndash;                             th:if="${#fields.hasErrors('firstName')}"&ndash;&gt;-->
<!--                        &lt;!&ndash;                             th:errors="*{firstName}">firstName error&ndash;&gt;-->
<!--                        &lt;!&ndash;                        </div>&ndash;&gt;-->
<!--                    </div>-->
<!--                    <div class="mb-3">-->
<!--                        <label class="form-label fw-bold" for="editLastName">Last name</label>-->
<!--                        <input class="form-control w-50 mx-auto" type="text" id="editLastName">-->
<!--                        &lt;!&ndash;                        <div class="alert alert-danger mt-2 w-75 mx-auto"&ndash;&gt;-->
<!--                        &lt;!&ndash;                             th:if="${#fields.hasErrors('lastName')}"&ndash;&gt;-->
<!--                        &lt;!&ndash;                             th:errors="*{lastName}">lastName error&ndash;&gt;-->
<!--                        &lt;!&ndash;                        </div>&ndash;&gt;-->
<!--                    </div>-->
<!--                    <div class="mb-3">-->
<!--                        <label class="form-label fw-bold" for="editAge">Age</label>-->
<!--                        <input class="form-control w-50 mx-auto" type="number" id="editAge">-->
<!--                        &lt;!&ndash;                        <div class="alert alert-danger mt-2 w-50 mx-auto"&ndash;&gt;-->
<!--                        &lt;!&ndash;                             th:if="${#fields.hasErrors('age')}"&ndash;&gt;-->
<!--                        &lt;!&ndash;                             th:errors="*{age}">age error&ndash;&gt;-->
<!--                        &lt;!&ndash;                        </div>&ndash;&gt;-->
<!--                    </div>-->
<!--                    <div class="mb-3">-->
<!--                        <label class="form-label fw-bold" for="editEmail">Email</label>-->
<!--                        <input class="form-control w-50 mx-auto" type="email" id="editEmail">-->
<!--                        &lt;!&ndash;                        <div class="alert alert-danger mt-2 w-50 mx-auto"&ndash;&gt;-->
<!--                        &lt;!&ndash;                             th:if="${#fields.hasErrors('email')}"&ndash;&gt;-->
<!--                        &lt;!&ndash;                             th:errors="*{email}">email error&ndash;&gt;-->
<!--                        &lt;!&ndash;                        </div>&ndash;&gt;-->
<!--                    </div>-->
<!--                    <div class="mb-3">-->
<!--                        <label class="form-label fw-bold" for="editPassword">Password</label>-->
<!--                        <input class="form-control w-50 mx-auto" type="password" id="editPassword">-->
<!--                        &lt;!&ndash;                        <div class="alert alert-danger mt-2 w-75 mx-auto"&ndash;&gt;-->
<!--                        &lt;!&ndash;                             th:if="${#fields.hasErrors('password')}"&ndash;&gt;-->
<!--                        &lt;!&ndash;                             th:errors="*{password}">password error&ndash;&gt;-->
<!--                        &lt;!&ndash;                        </div>&ndash;&gt;-->
<!--                    </div>-->
<!--                    <div class="mb-3">-->
<!--                        <label for="editRoles" class="form-label fw-bold">Role</label>-->
<!--                        <select class="form-select w-50 mx-auto" id="editRoles" name="roles" multiple>-->
<!--                            <option></option>-->
<!--                        </select>-->
<!--                    </div>-->
<!--                    &lt;!&ndash;                    <div class="alert alert-danger mt-2 w-50 mx-auto"&ndash;&gt;-->
<!--                    &lt;!&ndash;                         th:if="${#fields.hasErrors('roles')}"&ndash;&gt;-->
<!--                    &lt;!&ndash;                         th:errors="*{roles}">roles error&ndash;&gt;-->
<!--                    &lt;!&ndash;                    </div>&ndash;&gt;-->
<!--                </form>-->
<!--            </div>-->
<!--            <div class="modal-footer">-->
<!--                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>-->
<!--                <button type="submit" class="btn btn-primary" form="editUserForm">Edit</button>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->

<!--&lt;!&ndash; modal delete user &ndash;&gt;-->
<!--<div class="modal" id="deleteUserModal" tabindex="-1" aria-labelledby="deleteUserLabel" aria-hidden="true">-->
<!--    <div class="modal-dialog">-->
<!--        <div class="modal-content">-->
<!--            <div class="modal-header">-->
<!--                <h5 class="modal-title" id="deleteUserLabel">Delete user</h5>-->
<!--                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">-->
<!--                </button>-->
<!--            </div>-->
<!--            <div class="modal-body text-center">-->
<!--                <form id="deleteUserForm" th:method="POST" th:action="@{/admin/delete/{id}}">-->
<!--                    <div class="mb-3">-->
<!--                        <label class="form-label fw-bold" for="deleteUserId">ID</label>-->
<!--                        <input class="form-control w-50 mx-auto bg-light" type="text" id="deleteUserId" disabled>-->
<!--                    </div>-->
<!--                    <div class="mb-3">-->
<!--                        <label class="form-label fw-bold" for="deleteUserFirstName">First name</label>-->
<!--                        <input class="form-control w-50 mx-auto bg-light" type="text" id="deleteUserFirstName" disabled>-->
<!--                    </div>-->
<!--                    <div class="mb-3">-->
<!--                        <label class="form-label fw-bold" for="deleteUserLastName">Last name</label>-->
<!--                        <input class="form-control w-50 mx-auto bg-light" type="text" id="deleteUserLastName" disabled>-->
<!--                    </div>-->
<!--                    <div class="mb-3">-->
<!--                        <label class="form-label fw-bold" for="deleteUserAge">Age</label>-->
<!--                        <input class="form-control w-50 mx-auto bg-light" type="number" id="deleteUserAge" disabled>-->
<!--                    </div>-->
<!--                    <div class="mb-3">-->
<!--                        <label class="form-label fw-bold" for="deleteUserEmail">Email</label>-->
<!--                        <input class="form-control w-50 mx-auto bg-light" type="email" id="deleteUserEmail" disabled>-->
<!--                    </div>-->
<!--                    <div class="mb-3">-->
<!--                        <label for="deleteUserRoles" class="form-label fw-bold">Role</label>-->
<!--                        <select class="form-select w-50 mx-auto bg-light" id="deleteUserRoles" multiple disabled>-->
<!--                            <option></option>-->
<!--                        </select>-->
<!--                    </div>-->
<!--                </form>-->
<!--            </div>-->
<!--            <div class="modal-footer">-->
<!--                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>-->
<!--                <button type="submit" class="btn btn-danger" form="deleteUserForm">Delete</button>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->

<!--<script>-->
<!--    const editButtons = document.querySelectorAll('.btn[data-id]');-->
<!--    editButtons.forEach(button => {-->
<!--        const userId = button.getAttribute('data-id');-->
<!--        const editUserModal = document.getElementById(`editUserModal-${userId}`);-->

<!--        editUserModal.addEventListener('show.bs.modal', function (event) {-->
<!--            const button = event.relatedTarget;-->
<!--            const userId = button.getAttribute('data-id');-->
<!--            const firstName = button.getAttribute('data-firstName');-->
<!--            const lastName = button.getAttribute('data-lastName');-->
<!--            const age = button.getAttribute('data-age');-->
<!--            const email = button.getAttribute('data-email');-->
<!--            const roles = button.getAttribute('data-roles').split(',');-->

<!--            const modalInputId = editUserModal.querySelector('#editId');-->
<!--            const modalInputFirstName = editUserModal.querySelector('#editFirstName');-->
<!--            const modalInputLastName = editUserModal.querySelector('#editLastName');-->
<!--            const modalInputAge = editUserModal.querySelector('#editAge');-->
<!--            const modalInputEmail = editUserModal.querySelector('#editEmail');-->
<!--            const modalSelectRoles = editUserModal.querySelector('#editRoles');-->

<!--            modalInputId.value = userId;-->
<!--            modalInputFirstName.value = firstName;-->
<!--            modalInputLastName.value = lastName;-->
<!--            modalInputAge.value = age;-->
<!--            modalInputEmail.value = email;-->

<!--            Array.from(modalSelectRoles.options).forEach(option => {-->
<!--                option.selected = roles.includes(option.value);-->
<!--            });-->
<!--        });-->
<!--    });-->

<!--</script>-->

<!--<script>-->
<!--    const deleteButtons = document.querySelectorAll('.btn[data-deleteId]');-->
<!--    deleteButtons.forEach(button => {-->
<!--        const userId = button.getAttribute('data-deleteId');-->
<!--        const deleteUserModal = document.getElementById(`deleteUserModal-${userId}`);-->

<!--        deleteUserModal.addEventListener('show.bs.modal', function (event) {-->
<!--            const button = event.relatedTarget;-->
<!--            const userId = button.getAttribute('data-deleteId');-->
<!--            const firstName = button.getAttribute('data-firstName');-->
<!--            const lastName = button.getAttribute('data-lastName');-->
<!--            const age = button.getAttribute('data-age');-->
<!--            const email = button.getAttribute('data-email');-->

<!--            const modalInputId = deleteUserModal.querySelector('#deleteUserId');-->
<!--            const modalInputFirstName = deleteUserModal.querySelector('#deleteUserFirstName');-->
<!--            const modalInputLastName = deleteUserModal.querySelector('#deleteUserLastName');-->
<!--            const modalInputAge = deleteUserModal.querySelector('#deleteUserAge');-->
<!--            const modalInputEmail = deleteUserModal.querySelector('#deleteUserEmail');-->

<!--            modalInputId.value = userId;-->
<!--            modalInputFirstName.value = firstName;-->
<!--            modalInputLastName.value = lastName;-->
<!--            modalInputAge.value = age;-->
<!--            modalInputEmail.value = email;-->

<!--        });-->
<!--    });-->

<!--</script>-->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="/js/header.js"></script>
<script src="/js/admin.js"></script>
<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>